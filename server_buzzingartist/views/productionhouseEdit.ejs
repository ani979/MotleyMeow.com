<!DOCTYPE html>
<html>
  <head>
   <meta charset="utf-8">
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <title>PRODUCTION HOUSE EDIT</title>
      
  <link href="css/bootstrap.min.css" rel="stylesheet">
   
     <link href="css/dropdowns-enhancement.css" rel="stylesheet">
 
       <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="js/jquery.js"></script>
       <script src="js/bootstrap.min.js"></script>
 
       <script src="js/dropdowns-enhancement.js"></script>
  
      <script src="js/jquery.searcher.min.js"></script>

       <link rel="stylesheet" href="http://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">
  <script type="text/javascript" src="http://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
   <link href="css/style.css" rel="stylesheet">       
     <link href="css/tab.css" rel="stylesheet">
     <link rel="stylesheet" href="css/font-awesome.min.css">
  
</head>
  
<body>


 <div id = "headerloggedin"> </div>
 

 <div id = "headerloggedout"/>
 <% if (typeof infomessage != 'undefined' && infomessage != "") { %>
      <script type="text/javascript">
          
      </script>
  <!-- <h4 style="text-align:center"><strong> <%=infomessage%> </strong></h4> -->
        
      <div class="modal fade col-lg-12" id="successprofile" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" class="open-ViewDialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">

              <h4 class="modal-title" id="myModalLabel">Profile updated successfully</h4>
            </div>
            
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
              
            </div>
          </div>
        </div>
      </div>
<%}%>


<form id = "profileUpdateForm" class="form-vertical" role="form" enctype="multipart/form-data" action="/updateProductionHouse" method="post">
<fieldset>
<div class = "container">
<div class="table-responsive">   

  <table class="table table-bordered">
    <thead>
      <tr>
        <th>PLEASE FILL IN THE FOLLOWING INFORMATION :</th>
        <th>:)</th>
      </tr>
    </thead>
 <tbody>
      <tr>
        <td>NAME OF THE PRODUCTION HOUSE:</td>
        <td>
   <%if(typeof productionhouse.local.myname == 'undefined' || productionhouse.local.myname == 0 || productionhouse.local.myname == ' ') {%>
                                         <input type="text" class="form-control" name="myname" id="myname" placeholder="myname" 
                                            value = "PRODUCTION HOUSE" ></b>
                                        <% } else { %>
                                         <input type="text" class="form-control" name="myname" id="myname" placeholder="myname" 
                                          value = "<%= productionhouse.local.myname %>" > </b>
                                        <% } %> 


        </td>
      </tr>
<tr>
  <td>Established In :
  </td>
  <td>

 <% if(typeof productionhouse.local.establishedIn == 'undefined' || productionhouse.local.establishedIn == 0) { %>
                            
                          <p>   <input type="text" class="form-control" name="est" id="est" placeholder="Established In?" 
                                            value = "trying to recall" ></p>
                             <% } else { %>  
                      
                         <p>     <input type="text" class="form-control" name="est" id="est" placeholder="Established In?" 
                                            value =" <%= productionhouse.local.establishedIn %> "> </p>
                            <% } %>

  </td></tr>

<tr>
  <td>Upload your Display picture:
  </td>
  <td> <span class="btn btn-success fileinput-button col-md-12">  
                                            <i class="glyphicon glyphicon-plus"></i>
                                           <span>Add the display image of your production house.</span>
                                          <input id = "imagePost" type="file" class = "imageUpdateField" name = "imagePost" multiple style="color: transparent;"/>  <input type="hidden" id="fileName" name = "fileName">
                                            </span> </td>
</tr>


<tr>
  <td>About us :
  </td>
  <td><% if(typeof productionhouse.portfolio.myself == 'undefined' || productionhouse.portfolio.myself == 0 || productionhouse.portfolio.myself == "") { %>
                          <p>   <input type="text" class="form-control" name="myself" id="myself" placeholder="About us" 
                                            value = "trying to recall" ></p>
                             <% } else { %>  
                         <p>     <input type="text" class="form-control" name="myself" id="myself" placeholder="About us" 
                                            value =" <%= productionhouse.portfolio.myself %> "> </p>
                            <% } %>
  </td>
</tr>

<tr>
  <td>CONTACT NUMBER :</td>
  <td><% if(typeof productionhouse.local.contact == 'undefined' || productionhouse.local.contact== 0 ) { %>
                          <p>   <input type="text" class="form-control" name="contact" id="contact" placeholder="contact number?" 
                                            value = "Will be updating soon" ></p>
                             <% } else { %>  
                         <p>     <input type="text" class="form-control" name="contact" id="contact" placeholder="contact number?" 
                                            value =" <%= productionhouse.local.contact %> "> </p>
                            <% } %>
                          </td>
                        </tr>

<tr>
  <td>CITY</td>
  <td> 

<% if(typeof productionhouse.local.city == 'undefined' || productionhouse.local.city == 0 || productionhouse.local.city == " ") { %>
                          <p>   <input type="text" class="form-control" name="city" id="city" placeholder="City?" 
                                       ></p>
                             <% } else { %>  
                         <p>     <input type="text" class="form-control" name="city" id="city" placeholder=" <%=productionhouse.local.city %> " 
                                    value ="<%=productionhouse.local.city %>"    > </p>
                            <% } %>
</td>
                                      </tr>


                                      <tr>
                                        <td>OWNER's NAME:</td>
                                          <td>
 <% if(typeof productionhouse.local.ownername == 'undefined' || productionhouse.local.ownername == 0 || productionhouse.local.ownername == ' ') { %>
                            
                          <p>   <input type="text" class="form-control" name="ownername" id="ownername" placeholder="Owner's name?" 
                                      ></p>
                             <% } else { %>  
                      
                         <p>     <input type="text" class="form-control" name="ownername" id="ownername" placeholder="Owner's name?" 
                                            value =" <%= productionhouse.local.ownername %> "> </p>
                            <% } %>

  </td></tr>



<tr>
  <td>MY JOURNEY</td>
  <td>
<% if(typeof productionhouse.portfolio.myjourney == 'undefined' || productionhouse.portfolio.myjourney == 0 || productionhouse.portfolio.myjourney == "") { %>
                          <p>   <input type="text" class="form-control" name="myjourney" id="myjourney" placeholder="My journey till now.." 
                                            value = "It is a long story.." ></p>
                             <% } else { %>  
                         <p>     <input type="text" class="form-control" name="myjourney" id="myjourney" placeholder=" <%= productionhouse.portfolio.myjourney %>" 
                                            value =" <%= productionhouse.portfolio.myjourney %> "> </p>
                            <% } %>

  </td>
</tr>
<tr>
  <td>MY HOURS OF OPERATION</td>
  <td><% if(typeof productionhouse.portfolio.myHoursOfOperation == 'undefined' || productionhouse.portfolio.myHoursOfOperation== 0 || productionhouse.portfolio.myHoursOfOperation == "") { %>
                          <p>   <input type="text" class="form-control" name="myHoursOfOperation" id="myHoursOfOperation" placeholder="Will write it when i have a day off!!" 
                                            value = "Will write it when i have a day off!!" ></p>
                             <% } else { %>  
                         <p>     <input type="text" class="form-control" name="myHoursOfOperation" id="myHoursOfOperation" placeholder=" <%= productionhouse.portfolio.mymyHoursOfOperation %>" 
                                            value =" <%= productionhouse.portfolio.myHoursOfOperation %> "> </p>
                            <% } %>
  </td>
</tr><tr>
  <td>MY ADDRESS</td>
  <td><% if(typeof productionhouse.portfolio.myAddress == 'undefined' || productionhouse.portfolio.myAddress== 0 || productionhouse.portfolio.myAddress == "") { %>
                          <p>   <input type="text" class="form-control" name="myAddress" id="myAddress" placeholder="My address" 
                                            value = "My Address" ></p>
                             <% } else { %>  
                         <p>     <input type="text" class="form-control" name="myAddress" id="myAddress" placeholder=" <%= productionhouse.portfolio.myAddress %>" 
                                            value =" <%= productionhouse.portfolio.myAddress %> "> </p>
                            <% } %>



  </td>
</tr>







<tr>
  <td>MY FAMOUS PLAYS</td>
  <td>           
                            
                                      <div class="control-group col-md-12" id = "myPlays">
                                         

                                    
                                              <div class="panel panel-default controls col-md-9"> 
                                                
                                                  <div id = "playPlus" class="panel-body">
                                                      <div class="playEntry input-group col-md-12" id="plays0" style="padding-top:15px;">
                                                          <input class="col-md-12 playsText" id="playsText" name="playsText" type="text" placeholder="Name the play you were part of"/>
                                                          <div>&nbsp;</div>
                                                          <input class="col-md-12 playsLink" id="playsLink" name="playsLink" type="text" placeholder="Give any web link of it if you have it" onchange="insertURL(this)"/>
                                                          <input class="col-md-12 playsGroup" id="playsGroup" name="playsGroup" type="text" placeholder="The theatre group's name"/>
                                                          
                                                <p>&nbsp</p>
                                                          <div class = "col-sm-12">
                                                           <select class="col-sm-7" id="playsProdYear" name="playsProdYear" placeholder="The year of production" style="max-height:20px;"></select>
                                                           </div> 
                                    <div><p>&nbsp</p>
                                                        <span class="col-md-12">
                                                              <button class="btn btn-success btn-addPlays col-md-12" type="button" style="font-size:12px;">
                                                                  <span class="glyphicon glyphicon-plus">Add more experiences</span>
                                                              </button>
                                                        </span>
</div>
                                                    </div>
                                                  </div>   
                                              <br>
                                              
                                              <input type="hidden" id="mypfolioPlays" name = "mypfolioPlays">
                                                    
                                 
                                </div>
                                  </div>
                              
                                              
                                                        


  </td>
</tr><tr>
  <td>MY PICTURES</td>
  <td>     <div id="myPics">
                
                  
                    <% if(typeof productionhouse.portfolio == 'undefined' || typeof productionhouse.portfolio.myPhotos == 'undefined' || productionhouse.portfolio.myPhotos.length ==0 ) { %>
                      
                        <p class="form-control-static" ><span class="fieldNote antiguaFont" style="color:inherit">My cameramen are busy right now.Pics will be up soon!!</span>
                      
                    <% } else { 

                        console.log(" productionhouse.portfolio.myPhotos.length " + productionhouse.portfolio.myPhotos.length) %>
                        
                          <div id="links" class="row">
                          <% for(var i = 0; i < productionhouse.portfolio.myPhotos.length; i ++ ) { %> 
   </a>

                          <% } %>
                          </div>
                    <% } %>
                    <% if(typeof productionhouse.portfolio == 'undefined' || typeof productionhouse.portfolio.myFlickrPics == 'undefined' || productionhouse.portfolio.myFlickrPics.length ==0 ) { %>
                      
                    <% } else {   %>
                      <div class="row">
                        <h4 style="padding-left:20px;" class="oratorFont">Embedded from Flickr</h4>
                      <% for(var i = 0; i < productionhouse.portfolio.myFlickrPics.length; i ++ ) { %> 
                        
                                <a href = "<%=productionhouse.portfolio.myFlickrPics[i].flickrURL%>" target="_blank">
                                  <iframe src="<%=productionhouse.portfolio.myFlickrPics[i].flickrURL%>" width="270" height="200" frameborder=0 allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>
                                </a>  
                       <%} %> 
                     </div>

                    <% } %>     
                    
                  </div>
  </td>
</tr>




</tbody>
  </table>



  


  









<p style="text-align:center;" class="antiguaFont">Please ensure you have read and will abide by our <b>"Terms of use"</b> located in the footer
              <p style="text-align:center;"><button id = "submit" type="submit" class="btn btn-primary" type="button" name="btnvalue" value="submit"><i class="glyphicon glyphicon-ok-circle">SUBMIT</i>
              </button></fieldset>
            </form>
</div>
</div>
                            <div id = "footer" class ="oratorFont">
         <div class="container col-md-12 pull-right" >
            <div class="bottom-footer">
                  <ul class="footer-nav" style="font-size:16px;text-align:right">
                    <li><a href="/aboutus">About Us |</a></li>
                    <li><a href="/faq">FAQs |</a></li>
                    <li><a href="/supportUs">Support US |</a></li>
                    <li><a href="/credits">Thank You |</a></li>
                    <li><a href="/terms">Terms Of Use |</a></li>
                    <li><a href="/terms">Contact Us</a></li>
                  </ul>
            </div>
        
            


            <div class="row cp-copyright" style="text-align:right;">
                <div class="col-sm-12 col-xs-12">
                    <small>&copy; 2015 <br class="hidden-sm hidden-md hidden-lg" /> All Rights Reserved. | <a href="/privacy">Privacy Policy</a></small>
                </div>
            </div>
          </div> 
        </div>

</div>




    
    <script src="js/jquery.js"></script>
    <script src="js/jquery-validate.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/multiple-modals.js"></script>
    <script src="js/lightbox.min.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
     <script type="text/javascript">
      var imageIndex = 0;
      var vidIndex = 0;
      var playIndex = 0;
      var flickIndex = 0;
      var portfolioImages =new Array();
      var portfolioSocialPres = new Array();
     

     
      
      sendEvent = function(sel, step) {
          $(sel).trigger('next.m.' + step);
      }


      $('#profileUpdateForm').submit(function( event ) {

        var portfolioPlays =new Array();


        $('#playPlus').children('div').each(function () {

            var playName = $(this).find('#playsText').val();
            var playGroupName = "";
            var playProdyearVal = "";
      
            if(playName != 'undefined' && playName != "") {
              if( $(this).find('#playsGroup').val() != "") {
                playGroupName = $(this).find('#playsGroup').val();
              } 

              if($(this).find('#playsProdYear').val() != "" && $(this).find('#playsProdYear').val() != null) {
                playProdyearVal = $(this).find('#playsProdYear').val();
              }
             
              portfolioPlays.push({
                    "playName": playName,
                    "playURL": $(this).find('#playsLink').val(),
                   
                    "playGroup" : playGroupName,
                    "playProdYear" : playProdyearVal

              }); 
            }  
        });
        if(portfolioPlays.length > 0 ) {
          $('#mypfolioPlays').val(JSON.stringify(portfolioPlays));
        }





      });
      $('#deleteForm').validate({
            rules: {
                deletedFeedback: {
                    required: true
                }
            },
            highlight: function (element) {
                $(element).closest('.form-group').removeClass('success').addClass('error');
            },
            success: function (element) {
                $(element).closest('.form-group').removeClass('error').addClass('success');
            }
        });

      

      submitForDelete = function() {
          $('#deleteForm').submit();
      }

     $(window).ready(function(){
            var max = new Date().getFullYear(),
            min = max - 30,
            select = document.getElementById('playsProdYear');
            $("input").focus(function(){
    $(this).css("background-color", "#cccccc");
});
            $("input").blur(function(){
    $(this).css("background-color", "#ffffff");
});
            for (var i = min; i<=max; i++) {
                var opt = document.createElement('option');
                opt.value = i;
                opt.innerHTML = i;
                select.appendChild(opt);
            }
            $('#playsProdYear').prepend($('<option/>', { 
              value: "",
              text : "Select Year",
              selected : true
          }));
          $('#successprofile').modal('show');
         
               




          // Add the experience with plays
        <% if(typeof productionhouse.portfolio == 'undefined' || typeof productionhouse.portfolio.myPlays == 'undefined' || productionhouse.portfolio.myPlays.length <= 0 ) { %>
          <% } else { %>
                var controlForm = $('.controls #playPlus:first'),
                    currentEntry = $(this).find('.playEntry:first');
                $(currentEntry).find('#playsText').val("<%=productionhouse.portfolio.myPlays[0].playName%>");
                $(currentEntry).find('#playsLink').val("<%=productionhouse.portfolio.myPlays[0].playURL%>");
            
                $(currentEntry).find('#playsGroup').val("<%=productionhouse.portfolio.myPlays[0].playGroup%>");
                $(currentEntry).find('#playsProdYear').val("<%=productionhouse.portfolio.myPlays[0].playProdYear%>");
                 
                controlForm.find('.playEntry .btn-addPlays')
                    .removeClass('btn-addPlays').addClass('btn-removePlays')
                    .removeClass('btn-success').addClass('btn-danger')
                    .html('<span class="glyphicon glyphicon-minus"></span>');
                playIndex++; 


              <% for(var i = 1; i < productionhouse.portfolio.myPlays.length; i ++ ) { %> 
                  var controlForm = $('.controls #playPlus:first'),
                      currentEntry = $(this).find('.playEntry:last'),
                      newEntry = $(currentEntry).clone().appendTo(controlForm);
                $(newEntry).attr('id', 'plays' + playIndex);
                $(newEntry).find('#playsText').val("<%=productionhouse.portfolio.myPlays[i].playName%>");
                $(newEntry).find('#playsLink').val("<%=productionhouse.portfolio.myPlays[i].playURL%>");
              
                $(newEntry).find('#playsGroup').val("<%=productionhouse.portfolio.myPlays[i].playGroup%>");
                $(newEntry).find('#playsProdYear').val("<%=productionhouse.portfolio.myPlays[i].playProdYear%>");
                  
                  controlForm.find('.playEntry:not(:last) .btn-addPlays')
                      .removeClass('btn-addPlays').addClass('btn-removePlays')
                      .removeClass('btn-success').addClass('btn-danger')
                      .html('<span class="glyphicon glyphicon-minus"></span>');
                  playIndex++; 
              <% } %>  
                  var controlForm = $('.controls #playPlus:first'),
                  currentEntry = $(this).find('.playEntry:last'),
                  newEntry = $(currentEntry).clone().appendTo(controlForm);
                  $(newEntry).attr('id', 'plays' + playIndex);
                  $(newEntry).find('#playsText').val("");
                  $(newEntry).find('#playsLink').val("");
                
                  $(newEntry).find('#playsGroup').val("");
                  $(newEntry).find('#playsProdYear').val("");
                  newEntry.find('.btn-removePlays').removeClass('btn-removePlays').addClass('btn-addPlays')
                  .removeClass('btn-danger').addClass('btn-success')
                    .html('<span class="glyphicon glyphicon-plus"></span>');
                  playIndex++;  
          <% } %>

     });


    $("#headerloggedin").load("/header");
    
    $("#footer").load("footer.ejs"); 
    
     $(function() {
   
      
  //for adding plays and removing them 

        $(document).on('click', '.btn-addPlays', function(e) {
            e.preventDefault();
             
            var controlForm = $('.controls #playPlus:first'),
                currentEntry = $(this).parents('.playEntry:first'),
                newEntry = $(currentEntry).clone().appendTo(controlForm);
            $(newEntry).attr('id', 'plays' + playIndex);
            newEntry.find('input').val('');
            newEntry.find('select').val("");
            controlForm.find('.playEntry:not(:last) .btn-addPlays')
                .removeClass('btn-addPlays').addClass('btn-removePlays')
                .removeClass('btn-success').addClass('btn-danger')
                .html('<span class="glyphicon glyphicon-minus"></span>');
            playIndex++;    
            
        }).on('click', '.btn-removePlays', function(e) {
        
          $(this).parents('.playEntry:first').remove();
          e.preventDefault();
          return false;
        });

    });
















    </script>

  </body>
</html>